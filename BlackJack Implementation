import random

# 1. Create deck
def create_deck():
deck = []
values = [2, 3, 4, 5, 6, 7, 8, 9, 10, 10, 10, 10, 11] # J, Q, K = 10, Ace = 11
for _ in range(4): # 4 suits
deck.extend(values)
return deck


# 2. Deal a random card
def deal_card(deck):
card = random.choice(deck)
deck.remove(card)
return card


# 3. Calculate total with Ace adjustment
def calculate_total(hand):
total = sum(hand)
aces = hand.count(11)

while total > 21 and aces > 0:
total -= 10
aces -= 1

return total


# 4. Initial deal
def initial_deal(deck):
player_hand = [deal_card(deck), deal_card(deck)]
dealer_hand = [deal_card(deck), deal_card(deck)]
return player_hand, dealer_hand


# 5. Show hands
def show_hands(player_hand, dealer_hand, reveal):
print("\n--- Current Hands ---")
print("Player hand:", player_hand, "Total:", calculate_total(player_hand))

if reveal:
print("Dealer hand:", dealer_hand, "Total:", calculate_total(dealer_hand))
else:
print("Dealer hand:", [dealer_hand[0], "?"], "Total: ?")


# 6. Player turn
def player_turn(hand, deck):
while calculate_total(hand) < 21:
choice = input("Do you want to hit or stand? (h/s): ").lower()
if choice == 'h':
hand.append(deal_card(deck))
print("You drew:", hand[-1])
print("New total:", calculate_total(hand))
elif choice == 's':
break
else:
print("Invalid input. Please enter 'h' or 's'.")

return hand


# 7. Dealer turn
def dealer_turn(hand, deck):
while calculate_total(hand) < 17:
hand.append(deal_card(deck))
return hand


# 8. Determine winner
def determine_winner(player_total, dealer_total):
if player_total > 21:
return "You busted. Dealer wins."
elif dealer_total > 21:
return "Dealer busted. You win!"
elif player_total > dealer_total:
return "You win!"
elif dealer_total > player_total:
return "Dealer wins."
else:
return "It's a tie!"


# 9. Main game
def main_game():
deck = create_deck()
player_hand, dealer_hand = initial_deal(deck)

show_hands(player_hand, dealer_hand, reveal=False)

player_hand = player_turn(player_hand, deck)
player_total = calculate_total(player_hand)

if player_total <= 21:
dealer_hand = dealer_turn(dealer_hand, deck)

dealer_total = calculate_total(dealer_hand)

show_hands(player_hand, dealer_hand, reveal=True)

result = determine_winner(player_total, dealer_total)
print("\nResult:", result)


# Run the game
main_game()